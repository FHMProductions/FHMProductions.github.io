<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="UTF-8">
    <title>Talent</title>

    <!-- Vendor CSS Files -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.css"/>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.3/font/bootstrap-icons.css" rel="stylesheet">

    <link rel="stylesheet" href="static/css/styles.css">
</head>
<body>
<header class="header">
    <nav>
        <div class="logo">
            <a href="/index.html">
                <img src="static/img/logo.png" alt="FHM Productions Logo">
            </a>
        </div>
        <h1 class="title">Our Talent</h1>
        <div class="burger-menu">
            <span></span>
            <span></span>
            <span></span>
        </div>
    </nav>
</header>


<!-- ======= Menu ======= -->
<div id="menu"></div>
<!--End Menu-->

<section class="talent-section-container">
<div class="talent-section"></div>
</section>


<section class="talent-section-arrow">
    <div class="arrow">
        <a href="#next-page"><i class="fas fa-arrow-down"></i></a>
    </div>
</section>

<!-- ======= Footer ======= -->
<footer id="footer">
</footer><!-- End Footer -->


<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.min.js"></script>
<script src="static/js/main.js"></script>
<script>
    $(document).ready(function(){
        // Fetch the data from the JSON file
        fetch('static/data/talent.json')
        .then(response => response.json())
            .then(data => {
                // Group the data into sets of 12 (for each section)
                const groupedData = data.reduce((resultArray, item, index) => {
                    const chunkIndex = Math.floor(index/12)
                    if(!resultArray[chunkIndex]) {
                        resultArray[chunkIndex] = [] // start a new chunk
                    }
                    resultArray[chunkIndex].push(item)
                    return resultArray
                }, [])

                // Generate the HTML for each section
                const sections = groupedData.map((group, groupIndex) => {
                    // Generate the HTML for each row in the section
                    const rows = group.reduce((resultArray, item, index) => {
                        const chunkIndex = Math.floor(index/4)
                        if(!resultArray[chunkIndex]) {
                            resultArray[chunkIndex] = [] // start a new chunk
                        }
                        resultArray[chunkIndex].push(item)
                        return resultArray
                    }, []).map((row, rowIndex) => `
                        <div class="row">
                            ${row.map(item => {
                                // Extract the name from the imgSrc and replace hyphens with spaces
                                const name = item.imgSrc.split('/').pop().split('.')[0].replace(/-/g, ' ');
                                return `
                                    <div class="col-md-3">
                                        <a href="${item.link}">
                                            <img src="${item.imgSrc}" alt="${item.altText}" class="img-fluid">
                                            <h2 class="name">${name}</h2>
                                        </a>
                                    </div>
                                `;
                            }).join('')}
                        </div>
                    `).join('');

                    return `
                        <section class="talent-section" id="set-${groupIndex+1}" style="display: ${groupIndex === 0 ? 'block' : 'none'};">
                            ${rows}
                        </section>
                    `;
                }).join('');

                // Insert the sections before the talent-section-arrow div
                document.querySelector('.talent-section-arrow').insertAdjacentHTML('beforebegin', sections);
            });
    });
</script>
<script>
    document.querySelector('.arrow').addEventListener('click', function() {
        // Get only the sections that have content
        var sets = Array.prototype.filter.call(document.querySelectorAll('.talent-section'), function(set) {
            return set.innerHTML.trim() !== '';
        });
        var currentSetIndex = Array.prototype.findIndex.call(sets, function(set) {
            return set.style.display !== 'none';
        });
        sets[currentSetIndex].style.display = 'none';
        var nextSetIndex = (currentSetIndex + 1) % sets.length;
        sets[nextSetIndex].style.display = 'block';
    });
</script>
</body>
</html>